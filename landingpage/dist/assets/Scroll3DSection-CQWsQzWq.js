import{a as s,j as F}from"./vendor-B72in6T-.js";import{S as _,P as ee,W as te,G as re,B as G,C as I,a as x,b as B,A as $,c as H,k as ne,M as oe,e as se}from"./three-C7tQifid.js";import{g as ie}from"./gsap-CB87Sc6I.js";import{S as L}from"./useLenis-BRGNnWgO.js";import{t as ae}from"./threeUtils-wIMy6wkn.js";import"./index-CqmgmGrb.js";ie.registerPlugin(L);const fe=({children:J,className:K="",variant:d="spiral"})=>{const h=s.useRef(null),v=s.useRef(null),O=s.useRef(null),g=s.useRef(null),l=s.useRef(null),C=s.useRef(null),A=s.useRef(null),n=s.useRef({spiral:null,plane:null,strands:[],ambientParticles:null}),y=s.useRef({x:0,y:0}),p=s.useRef({x:0,y:0}),N=s.useRef(0),T=s.useRef(0),R=s.useRef([]);return s.useEffect(()=>{if(!v.current||!h.current)return;const b=new _;O.current=b;const z=new ee(75,window.innerWidth/window.innerHeight,.1,1e3);z.position.z=30,l.current=z;const M=new te({canvas:v.current,antialias:!0,alpha:!0,powerPreference:"high-performance"});M.setSize(window.innerWidth,window.innerHeight),M.setPixelRatio(Math.min(window.devicePixelRatio,2)),g.current=M;const c=new re;if(A.current=c,d==="spiral"){const t=new G,r=new Float32Array(1e3*3),i=new Float32Array(1e3*3),a=[new I(6514417),new I(9133302),new I(440020)];for(let o=0;o<1e3;o++){const u=o/1e3,f=u*Math.PI*20,w=5+u*15,W=(u-.5)*40;r[o*3]=Math.cos(f)*w,r[o*3+1]=W,r[o*3+2]=Math.sin(f)*w;const j=a[Math.floor(u*a.length)];i[o*3]=j.r,i[o*3+1]=j.g,i[o*3+2]=j.b}t.setAttribute("position",new x(r,3)),t.setAttribute("color",new x(i,3));const E=new B({size:.15,vertexColors:!0,transparent:!0,opacity:.8,blending:$}),m=new H(t,E);c.add(m),n.current.spiral=m}else if(d==="wave"){const e=new ne(60,40,40,30),t=new oe({color:6514417,wireframe:!0,transparent:!0,opacity:.3}),r=new se(e,t);r.rotation.x=-Math.PI/3,c.add(r),n.current.plane=r}else if(d==="helix"){const t=[];for(let r=0;r<2;r++){const i=new G,a=new Float32Array(300*3);for(let o=0;o<300;o++){const u=o/300,f=u*Math.PI*8+r*Math.PI,w=3,W=(u-.5)*30;a[o*3]=Math.cos(f)*w,a[o*3+1]=W,a[o*3+2]=Math.sin(f)*w}i.setAttribute("position",new x(a,3));const E=new B({color:r===0?6514417:440020,size:.2,transparent:!0,opacity:.8,blending:$}),m=new H(i,E);t.push(m),c.add(m)}n.current.strands=t}b.add(c);const U=250,k=new G,P=new Float32Array(U*3);for(let e=0;e<U;e++)P[e*3]=(Math.random()-.5)*80,P[e*3+1]=(Math.random()-.5)*60,P[e*3+2]=(Math.random()-.5)*40;k.setAttribute("position",new x(P,3));const Q=new B({color:16777215,size:.05,transparent:!0,opacity:.3}),q=new H(k,Q);b.add(q),n.current.ambientParticles=q;const V=L.create({trigger:h.current,start:"top bottom",end:"bottom top",scrub:1,onUpdate:e=>{A.current&&(A.current.rotation.y=e.progress*Math.PI*2)}});R.current.push(V);const Z=L.create({trigger:h.current,start:"top bottom",end:"center center",scrub:1,onUpdate:e=>{l.current&&(l.current.position.z=30-e.progress*20)}});R.current.push(Z);const D=ae(e=>{y.current.x=e.clientX/window.innerWidth*2-1,y.current.y=-(e.clientY/window.innerHeight)*2+1},16);window.addEventListener("mousemove",D);let S=0;const X=()=>{if(C.current=requestAnimationFrame(X),N.current+=.01,T.current++,p.current.x+=(y.current.y*.5-p.current.x)*.05,p.current.y+=(y.current.x*.5-p.current.y)*.05,c.rotation.x=p.current.x,c.rotation.z=Math.sin(N.current*.5)*.1,n.current.ambientParticles&&(n.current.ambientParticles.rotation.y+=2e-4),d==="wave"&&n.current.plane&&T.current%2===0){S+=.02;const e=n.current.plane.geometry,t=e.attributes.position.array;for(let r=0;r<t.length;r+=3){const i=t[r],a=t[r+1];t[r+2]=Math.sin(i*.2+S)*2+Math.cos(a*.15+S)*2}e.attributes.position.needsUpdate=!0}M.render(b,z)};X();const Y=()=>{!l.current||!g.current||(l.current.aspect=window.innerWidth/window.innerHeight,l.current.updateProjectionMatrix(),g.current.setSize(window.innerWidth,window.innerHeight))};return window.addEventListener("resize",Y),()=>{var e;window.removeEventListener("mousemove",D),window.removeEventListener("resize",Y),R.current.forEach(t=>t.kill()),R.current=[],C.current&&cancelAnimationFrame(C.current),n.current.spiral&&(n.current.spiral.geometry.dispose(),n.current.spiral.material.dispose()),n.current.plane&&(n.current.plane.geometry.dispose(),n.current.plane.material.dispose()),n.current.strands.forEach(t=>{t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(r=>r.dispose()):t.material.dispose())}),n.current.ambientParticles&&(n.current.ambientParticles.geometry.dispose(),n.current.ambientParticles.material.dispose()),(e=g.current)==null||e.dispose()}},[d]),F.jsxs("section",{ref:h,className:`relative ${K}`,children:[F.jsx("canvas",{ref:v,className:"absolute inset-0 w-full h-full","aria-hidden":"true"}),F.jsx("div",{className:"relative z-10",children:J})]})};export{fe as default};
