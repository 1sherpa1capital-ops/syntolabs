import{a,j as u}from"./vendor-BRuzGT1m.js";import{S as Y,P as J,W as K,G as Q,i as re,E as ne,M as z,C as Z,e as D,j as ae,L as se,k as ce,l as oe,m as ie,n as U,B as le,a as ue,b as de,A as me,c as pe,R as fe}from"./three-vbdUuL-P.js";import{t as he}from"./Home-3M3MMm-K.js";import"./index-D3iw07jv.js";import"./Logo-I7y4YvQF.js";import"./useLenis-DlkS25Du.js";const Me=({dataPoints:d,labels:i,color:g="#ffffff",height:L="300px"})=>{const t=a.useRef(null),[f,P]=a.useState(-1),S=a.useRef(null),h=a.useRef(null),m=a.useRef(null),w=a.useRef(null),s=a.useRef({bars:[],particles:null,gridHelper:null}),x=a.useRef(new oe),H=a.useRef(0),R=a.useRef(0),C=a.useRef(null);return a.useEffect(()=>{if(!t.current)return;const G=new Y;S.current=G;const y=new J(60,t.current.clientWidth/t.current.clientHeight,.1,1e3);y.position.set(0,15,30),y.lookAt(0,5,0),m.current=y;const v=new K({antialias:!0,alpha:!0,powerPreference:"high-performance"});v.setSize(t.current.clientWidth,t.current.clientHeight),v.setPixelRatio(Math.min(window.devicePixelRatio,2)),t.current.appendChild(v.domElement),h.current=v;const l=new Q;G.add(l);const p=new ie(40,20,2236962,1118481);p.position.y=0,l.add(p),s.current.gridHelper=p;const o=2,M=1,k=-(d.length*(o+M))/2+o/2,B=new Z(g),A=[];d.forEach((e,c)=>{const n=Math.max(e,2),r=new U(o,n,o),W=new z({color:B,transparent:!0,opacity:.4}),b=new D(r,W);b.position.x=k+c*(o+M),b.position.y=n/2,b.position.z=0,b.userData={index:c,value:e,originalScale:1},A.push(b),l.add(b);const $=new U(o,n,o),ee=new z({color:16777215,wireframe:!0,transparent:!0,opacity:.1}),te=new D($,ee);b.add(te)}),s.current.bars=A;const E=60,I=new le,N=new Float32Array(E*3),j=new Float32Array(E*3);for(let e=0;e<E;e++){const c=Math.floor(Math.random()*d.length),n=A[c],r=n.userData.value;j[e*3]=n.position.x+(Math.random()-.5)*o,j[e*3+1]=r+Math.random()*5+2,j[e*3+2]=(Math.random()-.5)*o,N[e*3]=(Math.random()-.5)*50,N[e*3+1]=Math.random()*30,N[e*3+2]=(Math.random()-.5)*30}C.current=j,I.setAttribute("position",new ue(N,3));const _=new de({color:16777215,size:.08,transparent:!0,opacity:.4,blending:me}),q=new pe(I,_);l.add(q),s.current.particles=q;const T=new fe,V=he(e=>{if(!t.current)return;const c=t.current.getBoundingClientRect();x.current.x=(e.clientX-c.left)/c.width*2-1,x.current.y=-((e.clientY-c.top)/c.height)*2+1,T.setFromCamera(x.current,y);const n=T.intersectObjects(A);P(n.length>0?n[0].object.userData.index:-1)},16);t.current.addEventListener("mousemove",V);const X=()=>{if(w.current=requestAnimationFrame(X),H.current+=.01,R.current++,A.forEach((e,c)=>{const n=c===f,r=n?1.05:1;e.scale.y+=(r-e.scale.y)*.1,e.position.y=e.userData.value*e.scale.y/2+Math.sin(H.current+c*.5)*.05;const W=Array.isArray(e.material)?e.material[0]:e.material;W.opacity=n?.6:.4}),R.current%2===0&&s.current.particles&&C.current){const e=s.current.particles.geometry.attributes.position.array,c=C.current;for(let n=0;n<E;n++){const r=n*3;e[r]+=(c[r]-e[r])*.01,e[r+1]+=(c[r+1]-e[r+1])*.01,e[r+2]+=(c[r+2]-e[r+2])*.01,e[r+1]+=Math.sin(H.current*1.5+n)*.005}s.current.particles.geometry.attributes.position.needsUpdate=!0}l.rotation.y=Math.sin(H.current*.2)*.03,v.render(G,y)};X();const O=()=>{!t.current||!m.current||!h.current||(m.current.aspect=t.current.clientWidth/t.current.clientHeight,m.current.updateProjectionMatrix(),h.current.setSize(t.current.clientWidth,t.current.clientHeight))};return window.addEventListener("resize",O),()=>{var e,c,n;(e=t.current)==null||e.removeEventListener("mousemove",V),window.removeEventListener("resize",O),w.current&&cancelAnimationFrame(w.current),t.current&&((c=h.current)!=null&&c.domElement)&&t.current.removeChild(h.current.domElement),s.current.bars.forEach(r=>{r.geometry&&r.geometry.dispose(),r.material&&(Array.isArray(r.material)?r.material:[r.material]).forEach(W=>W.dispose())}),s.current.particles&&(s.current.particles.geometry.dispose(),s.current.particles.material.dispose()),s.current.gridHelper&&(s.current.gridHelper.geometry.dispose(),s.current.gridHelper.material.dispose()),(n=h.current)==null||n.dispose()}},[d,g,f]),u.jsxs("div",{className:"relative",children:[u.jsx("div",{ref:t,className:"w-full overflow-hidden",style:{height:L}}),f>=0&&((i==null?void 0:i[f])||d[f])&&u.jsxs("div",{className:"absolute top-4 right-4 bg-zinc-950 border border-white/10 rounded-none px-6 py-4 shadow-2xl backdrop-blur-xl animate-reveal",children:[u.jsx("div",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-white/40 mb-1",children:(i==null?void 0:i[f])||"Metric"}),u.jsx("div",{className:"text-2xl font-black text-white",children:d[f]})]})]})},Ee=({segments:d,size:i=200})=>{const g=a.useRef(null),L=a.useRef(null),t=a.useRef(null),f=a.useRef(null),P=a.useRef(null),S=a.useRef({meshes:[],lines:[]}),h=a.useRef(0);return a.useEffect(()=>{if(!g.current)return;const m=new Y;L.current=m;const w=new J(50,1,.1,1e3);w.position.z=15,f.current=w;const s=new K({antialias:!0,alpha:!0,powerPreference:"high-performance"});s.setSize(i,i),s.setPixelRatio(Math.min(window.devicePixelRatio,2)),g.current.appendChild(s.domElement),t.current=s;const x=new Q;m.add(x);const H=d.reduce((l,p)=>l+p.value,0);let R=0;const C=[],G=[],y=["#ffffff","#a1a1aa","#71717a","#3f3f46"];d.forEach((l,p)=>{const o=l.value/H*Math.PI*2,M=new re,F=4.5,k=3.8;M.absarc(0,0,F,R,R+o,!1),M.absarc(0,0,k,R+o,R,!0);const B=new ne(M,{depth:.2,bevelEnabled:!1}),A=new z({color:new Z(y[p%y.length]),transparent:!0,opacity:.8}),E=new D(B,A);E.rotation.x=Math.PI/2,x.add(E),C.push(E);const I=new ae(B),N=new se({color:16777215,transparent:!0,opacity:.1}),j=new ce(I,N);j.rotation.x=Math.PI/2,x.add(j),G.push(j),R+=o}),S.current.meshes=C,S.current.lines=G;const v=()=>{P.current=requestAnimationFrame(v),h.current+=.01,x.rotation.z=h.current*.1,s.render(m,w)};return v(),()=>{var l,p;P.current&&cancelAnimationFrame(P.current),g.current&&((l=t.current)!=null&&l.domElement)&&g.current.removeChild(t.current.domElement),S.current.meshes.forEach(o=>{o.geometry.dispose(),(Array.isArray(o.material)?o.material:[o.material]).forEach(M=>M.dispose())}),(p=t.current)==null||p.dispose()}},[d,i]),u.jsxs("div",{className:"flex flex-col items-center gap-12",children:[u.jsx("div",{ref:g,style:{width:i,height:i}}),u.jsx("div",{className:"grid grid-cols-2 gap-x-12 gap-y-6",children:d.map((m,w)=>u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-1 h-1 rounded-full bg-white/40"}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-white/50",children:m.label}),u.jsxs("span",{className:"text-sm font-black text-white",children:[m.value,"%"]})]},w))})]})};export{Ee as Ring3DChart,Me as default};
