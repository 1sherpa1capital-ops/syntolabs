import{a as m,j as T}from"./vendor-BRuzGT1m.js";import{S as U,P as V,W as N,B as I,C as G,a as H,b as X,A as Y,c as D,k as J,M as S,e as k,g as K,V as O,L as Q,l as Z}from"./three-C7tQifid.js";import{t as _}from"./threeUtils-wIMy6wkn.js";const re=({variant:z="particles",intensity:j=1})=>{const i=m.useRef(null),q=m.useRef(null),g=m.useRef(null),F=m.useRef(null),C=m.useRef(null),c=m.useRef({particles:null,mesh:null,nodes:[],lines:[]}),h=m.useRef({x:0,y:0}),s=m.useRef({x:0,y:0}),R=m.useRef(0);return m.useEffect(()=>{if(!i.current)return;const p=new U;q.current=p;const y=new V(75,i.current.clientWidth/i.current.clientHeight,.1,1e3);y.position.z=30,F.current=y;const x=new N({antialias:!0,alpha:!0,powerPreference:"high-performance"});x.setSize(i.current.clientWidth,i.current.clientHeight),x.setPixelRatio(Math.min(window.devicePixelRatio,2)),i.current.appendChild(x.domElement),g.current=x;let A,P=null,L=[],b=[];if(z==="particles"){const u=Math.floor(1e3*j),t=new I,n=new Float32Array(u*3),a=new Float32Array(u*3),E=new G(6514417),w=new G(440020);for(let e=0;e<u;e++){const r=e*3,d=Math.random()*40,l=Math.random()*Math.PI*2,f=Math.random()*Math.PI;n[r]=d*Math.sin(f)*Math.cos(l),n[r+1]=(Math.random()-.5)*20,n[r+2]=d*Math.sin(f)*Math.sin(l);const v=E.clone().lerp(w,Math.random());a[r]=v.r,a[r+1]=v.g,a[r+2]=v.b}t.setAttribute("position",new H(n,3)),t.setAttribute("color",new H(a,3));const M=new X({size:.1,vertexColors:!0,transparent:!0,opacity:.6,blending:Y});A=new D(t,M),p.add(A),c.current.particles=A;const o=()=>{C.current=requestAnimationFrame(o),R.current++,R.current%2===0&&(s.current.x+=(h.current.x-s.current.x)*.03,s.current.y+=(h.current.y-s.current.y)*.03,A.rotation.y+=3e-4,A.rotation.x=s.current.y*.05,A.rotation.z=s.current.x*.05,x.render(p,y))};o()}else if(z==="waves"){const t=new J(50,50,49,49),n=new S({color:6514417,wireframe:!0,transparent:!0,opacity:.3});P=new k(t,n),P.rotation.x=-Math.PI/3,p.add(P),c.current.mesh=P;const a=t.attributes.position.array,E=new Float32Array(a);let w=0;const M=()=>{if(C.current=requestAnimationFrame(M),w+=.016,R.current++,R.current%2===0){for(let o=0;o<2500;o++){const e=o*3,r=E[e],d=E[e+1];a[e+2]=Math.sin(r*.2+w)*2+Math.cos(d*.15+w)*2}t.attributes.position.needsUpdate=!0,s.current.x+=(h.current.x-s.current.x)*.03,s.current.y+=(h.current.y-s.current.y)*.03,P.rotation.z=s.current.x*.1,P.rotation.x=-Math.PI/3+s.current.y*.1,x.render(p,y)}};M()}else if(z==="network"){const t=[];b=[],L=[];const n=new K(.15,8,8),a=new S({color:6514417});for(let o=0;o<30;o++){const e=new O((Math.random()-.5)*30,(Math.random()-.5)*20,(Math.random()-.5)*20);t.push(e);const r=new k(n.clone(),a.clone());r.position.copy(e),p.add(r),L.push(r)}c.current.nodes=L;const E=new Q({color:6514417,transparent:!0,opacity:.2});for(let o=0;o<30;o++)for(let e=o+1;e<30;e++)if(t[o].distanceTo(t[e])<8){const d=new I().setFromPoints([t[o],t[e]]),l=new Z(d,E.clone());b.push(l),p.add(l)}c.current.lines=b;let w=0;const M=()=>{if(C.current=requestAnimationFrame(M),w+=.016,R.current++,R.current%2!==0)return;t.forEach((e,r)=>{e.y+=Math.sin(w*.5+r*.5)*.01,L[r].position.copy(e)});let o=0;for(let e=0;e<30;e++)for(let r=e+1;r<30;r++){const d=t[e].distanceTo(t[r]);if(d<8&&o<b.length){const l=b[o],f=l.geometry.attributes.position.array;f[0]=t[e].x,f[1]=t[e].y,f[2]=t[e].z,f[3]=t[r].x,f[4]=t[r].y,f[5]=t[r].z,l.geometry.attributes.position.needsUpdate=!0;const v=Array.isArray(l.material)?l.material[0]:l.material;v.opacity=1-d/8,o++}}s.current.x+=(h.current.x-s.current.x)*.03,s.current.y+=(h.current.y-s.current.y)*.03,y.position.x=s.current.x*2,y.position.y=s.current.y*2,y.lookAt(0,0,0),x.render(p,y)};M()}const B=_(u=>{h.current.x=u.clientX/window.innerWidth*2-1,h.current.y=-(u.clientY/window.innerHeight)*2+1},16),W=()=>{!i.current||!F.current||!g.current||(F.current.aspect=i.current.clientWidth/i.current.clientHeight,F.current.updateProjectionMatrix(),g.current.setSize(i.current.clientWidth,i.current.clientHeight))};return window.addEventListener("mousemove",B),window.addEventListener("resize",W),()=>{var u,t;C.current&&cancelAnimationFrame(C.current),window.removeEventListener("mousemove",B),window.removeEventListener("resize",W),i.current&&((u=g.current)!=null&&u.domElement)&&i.current.removeChild(g.current.domElement),c.current.particles&&(c.current.particles.geometry.dispose(),c.current.particles.material.dispose()),c.current.mesh&&(c.current.mesh.geometry.dispose(),c.current.mesh.material.dispose()),c.current.nodes.forEach(n=>{n.geometry&&n.geometry.dispose(),n.material&&(Array.isArray(n.material)?n.material.forEach(a=>a.dispose()):n.material.dispose())}),c.current.lines.forEach(n=>{n.geometry&&n.geometry.dispose(),n.material&&(Array.isArray(n.material)?n.material.forEach(a=>a.dispose()):n.material.dispose())}),(t=g.current)==null||t.dispose()}},[z,j]),T.jsx("div",{ref:i,className:"absolute inset-0 w-full h-full","aria-hidden":"true"})};export{re as default};
